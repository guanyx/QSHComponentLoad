!function(n){"use strict";function e(n){return function(e){return{}.toString.call(e)=="[object "+n+"]"}}function r(n,e,r){function c(e){n.js&&n.js.length?$.when.apply($,i(n.js,d)).done(function(){r&&r(e),u.resolve(e)}).fail(function(){r&&r(!0),u.reject()}):(r&&r(),u.resolve())}var u=$.Deferred(),f=[],d=$(e);return d.length?(n.css&&(f=f.concat()),f=f.concat(),$.when(o(n.css,d),t(n.html,d)).done(function(n,e){m(e)&&(e=[e]),c(e)}).fail(function(){a("something error when load css and html")}),u):void a("unvaild dom")}function t(n,e){return p(n)&&(n=[]),n=n.map(function(n){var r=$.Deferred(),t=n,o=!0;return s(n)&&(t=n.url,!p(n.insert)&&(o=n.insert)),$.ajax({url:t,dataType:"html",async:!0,timeout:3e3}).done(function(n){o&&$(e).append(n),r.resolve(n)}).fail(function(){a({url:t,msg:"load with error"}),r.reject()}),r}),$.when.apply($,n)}function o(n,e){return p(n)&&(n=[]),n=n.map(function(n){var r=f("link");return r.rel="stylesheet",r.href=n,c(r,e,n)}),$.when.apply($,n)}function i(n,e){return n.map(function(n){d(n,e)})}function c(n,e,r){if(y[r])return y[r];var t=$.Deferred();return u(n,function(e){n.onload=n.onerror=n.onreadystatechange=null,e===!0?t.reject():t.resolve()}),$(document.head).append(n),y[r]=t,t}function u(n,e){var r="onload"in n;r?(n.onload=e,n.onerror=function(){a("error",{node:n}),e(!0)}):n.onreadystatechange=function(){/loaded|complete/.test(n.readyState)&&e()}}function a(n){console.error(n)}function f(n){return document.createElement(n)}var d,l=e("Function"),s=e("Object"),p=e("Undefined"),m=(Array.isArray||e("Array"),e("String")),y={},h="undefined"==typeof window&&"undefined"!=typeof importScripts&&l(importScripts);d=h?function(n){var e,r=$.Deferred();try{importScripts(n),r.resolve()}catch(t){e=t,r.reject()}}:function(n,e){var r=f("script");return r.type="text/javascript",r.src=n,r.defer=!0,r.async=!0,c(r,e,n)},n.QSHComponentLoad=r,"undefined"!=typeof module&&module.exports&&(module.exports=r),"function"==typeof define&&(define.amd||define.cmd)&&define(function(){return r})}(window);